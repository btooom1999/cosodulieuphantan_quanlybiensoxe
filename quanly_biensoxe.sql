create database Quanly_Biensoxe
go
use Quanly_Biensoxe
go

create table PHONG_DANGKY
(
	MADONVI_DANGKY CHAR(10) PRIMARY KEY NOT NULL,
	TENDONVI_DANGKY NVARCHAR(150),
	SODTDONVI_DANGKY CHAR(11),
	DIACHIDONVI_DANGKY NVARCHAR(150),
)

CREATE TABLE TT_CANBO
(
	MACANBO CHAR(10) PRIMARY KEY NOT NULL,
	MADONVI_DANGKY CHAR(10) NOT NULL,
	SOCMND_CANBO CHAR(12),
	TENCANBO NVARCHAR(50),
	DIACHI_CANBO NVARCHAR(150),
	SODT_CANBO CHAR(11),
	NGAYCAP_CMND_CANBO CHAR(11),
	NOICAP_CMND_CANBO NVARCHAR(150),
	CONSTRAINT FK_CANBO_PHONG FOREIGN KEY (MADONVI_DANGKY) REFERENCES PHONG_DANGKY(MADONVI_DANGKY)
)

CREATE TABLE TT_PHUONGTIEN
(
	SOMAY CHAR(20) NOT NULL,
	SOKHUNG CHAR(20) NOT NULL,
	NHANHIEU NVARCHAR(20),
	SOLOAI NVARCHAR(20),
	LOAIXE NVARCHAR(20),
	MAUXE NVARCHAR(20),
	NAMSANXUAT INT,
	DUNGTICH INT,
	PRIMARY KEY(SOMAY, SOKHUNG),
)

CREATE TABLE TT_CHUXE
(
	SOCMND_CHUXE CHAR(12) PRIMARY KEY NOT NULL,
	TENCHUXE NVARCHAR(100),
	DIACHI_CHUXE NVARCHAR(150),
	SODT_CHUXE CHAR(11),
	NGAYCAP_CMND_CHUXE DATE,
	NOICAP_CMND_CHUXE NVARCHAR(150),
)

CREATE TABLE DON_DANGKY
(
	BIENSO_MOI CHAR(12) PRIMARY KEY NOT NULL,
	MACANBO CHAR(10) NOT NULL,
	SOCMND_CHUXE CHAR(12) NOT NULL,
	SOMAY CHAR(20) NOT NULL,
	SOKHUNG CHAR(20) NOT NULL,
	LYDODANGKY NVARCHAR(150),
	NGAYDANGKY DATE,
	BIENSO_CU CHAR(12),
	LOAIDANGKY NVARCHAR(150),
	CONSTRAINT FK_DON_CANBO FOREIGN KEY (MACANBO) REFERENCES TT_CANBO(MACANBO),
	CONSTRAINT FK_DON_PHUONGTIEN FOREIGN KEY (SOMAY, SOKHUNG) REFERENCES TT_PHUONGTIEN(SOMAY, SOKHUNG),
	CONSTRAINT FK_DON_CHUXE FOREIGN KEY (SOCMND_CHUXE) REFERENCES TT_CHUXE(SOCMND_CHUXE)
)

set dateformat dmy

insert into PHONG_DANGKY (MADONVI_DANGKY, TENDONVI_DANGKY, SODTDONVI_DANGKY, DIACHIDONVI_DANGKY)
values ('DVDK1', N'Ðơn Vị Ðăng Ký Số 1', '18006568', N'140 Lê Trọng Tấn, Tân Phú, TP.HCM')
insert into PHONG_DANGKY (MADONVI_DANGKY, TENDONVI_DANGKY, SODTDONVI_DANGKY, DIACHIDONVI_DANGKY)
values ('DVDK2', N'Ðơn Vị Ðăng Ký Số 2', '18006564', N'25A Hoàng Du Khương, Long An')
insert into PHONG_DANGKY (MADONVI_DANGKY, TENDONVI_DANGKY, SODTDONVI_DANGKY, DIACHIDONVI_DANGKY)
values ('DVDK3', N'Ðơn Vị Ðăng Ký Số 3', '18006566', N'530 Nguyễn Ðình Chiểu, Q3, Đồng Nai')

insert into TT_CANBO (MACANBO, MADONVI_DANGKY, SOCMND_CANBO, TENCANBO, DIACHI_CANBO, SODT_CANBO, NGAYCAP_CMND_CANBO, NOICAP_CMND_CANBO)
values ('CB01', 'DVDK1', '356825619', N'Vũ Như Cẩn', N'Lô B Chung Cư HimLam,Tân Bình, TPHCM', '0919395959', '18-08-1990', N'CA TP.HCM')
insert into TT_CANBO (MACANBO, MADONVI_DANGKY, SOCMND_CANBO, TENCANBO, DIACHI_CANBO, SODT_CANBO, NGAYCAP_CMND_CANBO, NOICAP_CMND_CANBO)
values ('CB02', 'DVDK2', '312123129', N'Nguyễn Y Vân', N'34 Ðường số 24, Long An', '0856218711', '15-04-1999', N'CA Long An')
insert into TT_CANBO (MACANBO, MADONVI_DANGKY, SOCMND_CANBO, TENCANBO, DIACHI_CANBO, SODT_CANBO, NGAYCAP_CMND_CANBO, NOICAP_CMND_CANBO)
values ('CB03', 'DVDK2', '362345231', N'Vân Y Nguyên', N'123 Ðường số 3, Long An', '0315304322', '20-08-1993', N'CA Long An')
insert into TT_CANBO (MACANBO, MADONVI_DANGKY, SOCMND_CANBO, TENCANBO, DIACHI_CANBO, SODT_CANBO, NGAYCAP_CMND_CANBO, NOICAP_CMND_CANBO)
values ('CB04', 'DVDK3', '356535112', N'Lê Văn Táo', N'50/2 Nguyễn Gia Trí, Đồng Nai', '0888445588', '18-02-1998', N'CA Đồng Nai')
insert into TT_CANBO (MACANBO, MADONVI_DANGKY, SOCMND_CANBO, TENCANBO, DIACHI_CANBO, SODT_CANBO, NGAYCAP_CMND_CANBO, NOICAP_CMND_CANBO)
values ('CB05', 'DVDK1', '355234345', N'Ðào Thị Thơm', N'1 Nguyễn Trãi, TPHCM', '01262551241', '01-01-1986', N'CA TP.HCM')

insert into TT_PHUONGTIEN (SOMAY, SOKHUNG, NHANHIEU, SOLOAI, LOAIXE, MAUXE, NAMSANXUAT, DUNGTICH)
values ('VN-102810', 'VN-102810', N'YAMAHA', N'AB', N'EX150', N'Ðỏ', 2016, 150)
insert into TT_PHUONGTIEN (SOMAY, SOKHUNG, NHANHIEU, SOLOAI, LOAIXE, MAUXE, NAMSANXUAT, DUNGTICH)
values ('VN-145199', 'VN-145199', N'YAMAHA', N'AB', N'EX150', N'Ðỏ', 2016, 150)
insert into TT_PHUONGTIEN (SOMAY, SOKHUNG, NHANHIEU, SOLOAI, LOAIXE, MAUXE, NAMSANXUAT, DUNGTICH)
values ('VN-123420', 'VN-123420', N'YAMAHA', N'RUX', N'EX150', N'Ðỏ', 2016, 150)
insert into TT_PHUONGTIEN (SOMAY, SOKHUNG, NHANHIEU, SOLOAI, LOAIXE, MAUXE, NAMSANXUAT, DUNGTICH)
values ('JP-1111320', 'JP-1111320', N'YAMAHA', N'AB', N'EX150', N'Xanh', 2016, 150)
insert into TT_PHUONGTIEN (SOMAY, SOKHUNG, NHANHIEU, SOLOAI, LOAIXE, MAUXE, NAMSANXUAT, DUNGTICH)
values ('JP-2131233', 'JP-2131233', N'YAMAHA', N'AB', N'EX150', N'Ðỏ', 2016, 150)

insert into TT_CHUXE (SOCMND_CHUXE, TENCHUXE, DIACHI_CHUXE, SODT_CHUXE, NGAYCAP_CMND_CHUXE, NOICAP_CMND_CHUXE)
values ('341976200', N'Trần Văn Minh', N'TP.HCM', '0856218771', '14-04-2016', N'CA TP.HCM')
insert into TT_CHUXE (SOCMND_CHUXE, TENCHUXE, DIACHI_CHUXE, SODT_CHUXE, NGAYCAP_CMND_CHUXE, NOICAP_CMND_CHUXE)
values ('341023122', N'Âu Bích Phượng', N'TP.HCM', '0856218872', '14-08-2016', N'CA TP.HCM')
insert into TT_CHUXE (SOCMND_CHUXE, TENCHUXE, DIACHI_CHUXE, SODT_CHUXE, NGAYCAP_CMND_CHUXE, NOICAP_CMND_CHUXE)
values ('341012001', N'Phạm Gia Khang', N'Long An', '0855002327', '14-04-2010', N'CA Long An')
insert into TT_CHUXE (SOCMND_CHUXE, TENCHUXE, DIACHI_CHUXE, SODT_CHUXE, NGAYCAP_CMND_CHUXE, NOICAP_CMND_CHUXE)
values ('353012350', N'Châu Anh Khoa', N'Long An', '0856002316', '18-08-2016', N'CA Long An')
insert into TT_CHUXE (SOCMND_CHUXE, TENCHUXE, DIACHI_CHUXE, SODT_CHUXE, NGAYCAP_CMND_CHUXE, NOICAP_CMND_CHUXE)
values ('380112112', N'Phạm Thế Du', N'Đồng Nai', '0856254161', '12-12-2012', N'CA Ðồng Nai')

CREATE TABLE DON_DANGKY
(
	BIENSO_MOI CHAR(12) PRIMARY KEY NOT NULL,
	MACANBO CHAR(10) NOT NULL,
	SOCMND_CHUXE CHAR(12) NOT NULL,
	SOMAY CHAR(20) NOT NULL,
	SOKHUNG CHAR(20) NOT NULL,
	LYDODANGKY NVARCHAR(150),
	NGAYDANGKY DATE,
	BIENSO_CU CHAR(12),
	LOAIDANGKY NVARCHAR(150),
	CONSTRAINT FK_DON_CANBO FOREIGN KEY (MACANBO) REFERENCES TT_CANBO(MACANBO),
	CONSTRAINT FK_DON_PHUONGTIEN FOREIGN KEY (SOMAY, SOKHUNG) REFERENCES TT_PHUONGTIEN(SOMAY, SOKHUNG),
	CONSTRAINT FK_DON_CHUXE FOREIGN KEY (SOCMND_CHUXE) REFERENCES TT_CHUXE(SOCMND_CHUXE)
)

insert into DON_DANGKY (BIENSO_MOI, MACANBO, SOCMND_CHUXE, SOMAY, SOKHUNG, LYDODANGKY, NGAYDANGKY, BIENSO_CU, LOAIDANGKY)
values ('66K1-05292', 'CB01', '341976200', 'VN-102810', 'VN-102810', N'Xác nhận xe chính chủ', '30-05-2016', null, N'Đăng ký trước bạ')
insert into DON_DANGKY (BIENSO_MOI, MACANBO, SOCMND_CHUXE, SOMAY, SOKHUNG, LYDODANGKY, NGAYDANGKY, BIENSO_CU, LOAIDANGKY)
values ('95A3-02465', 'CB05', '341023122', 'VN-145199', 'VN-145199', N'Xác nhận xe chính chủ', '01-06-2016', null, N'Đăng ký trước bạ')
insert into DON_DANGKY (BIENSO_MOI, MACANBO, SOCMND_CHUXE, SOMAY, SOKHUNG, LYDODANGKY, NGAYDANGKY, BIENSO_CU, LOAIDANGKY)
values ('71D4-90892', 'CB04', '380112112', 'JP-2131233', 'JP-2131233', N'Xác nhận xe chính chủ', '01-06-2016', null, N'Đăng ký trước bạ')
insert into DON_DANGKY (BIENSO_MOI, MACANBO, SOCMND_CHUXE, SOMAY, SOKHUNG, LYDODANGKY, NGAYDANGKY, BIENSO_CU, LOAIDANGKY)
values ('59G1-05343', 'CB02', '341012001', 'VN-123420', 'VN-123420', N'Xác nhận xe chính chủ', '01-06-2016', null, N'Đăng ký trước bạ')
insert into DON_DANGKY (BIENSO_MOI, MACANBO, SOCMND_CHUXE, SOMAY, SOKHUNG, LYDODANGKY, NGAYDANGKY, BIENSO_CU, LOAIDANGKY)
values ('64K3-23433', 'CB03', '353012350', 'JP-1111320', 'JP-1111320', N'Xác nhận xe chính chủ', '01-06-2016', null, N'Đăng ký trước bạ')